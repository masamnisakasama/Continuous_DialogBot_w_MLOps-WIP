# WebApp_Continuous_DialogBot_w_MLOps(WIP)

## 概要
このプロジェクトはある人の書いた文章や喋った内容などを学習し、プレゼンテーション能力などを定量化します。具体的には構造性、話すスピード、抑揚などをスコアリングします。
MLOps無しで一旦WebAppにしてみます。
一旦アプリにした後は、プレゼン音声と制約可否のラベルつき擬似データを作ってMLOpsする予定です。

## 想定ユースケース
- ~~会社等において、文章や会話の履歴から個々の社員の思考の傾向を判定し、接し方への参考とすることで配属後のミスマッチを防ぐ。~~ （社員の属性や会話履歴などの信頼できるデータセットがないと難しい。そのような個人情報に近いものを公開しているサイトはないので断念）
- ~~電話でのサービスの売り込みにおいて、成約件数が多い社員の接客の傾向を分析し、マニュアルに組み込むなど集合知に落とし込むことで売上や通話品質の向上を目指す。~~(実際の録音記録と契約可否の結果に関するデータがないとモデルを構築するのは極めて難しい。もちろん持ち合わせていないので、断念)
- ベテラン社員のプレゼンテーション等を解析し、スキルセットを明文化することで促販や他者とのプレゼンなどに役立てる。（CHAT GPT-5を適宜用いて、スコアリングの詳細を詰めていくことで定量化できる。）

## アプリのURLおよび注意事項
MLOps無しでのWeb AppのURL:　https://snazzy-profiterole-cba9bf.netlify.app <br>
MLOps有りでのWeb AppのURL：
<br><br>＜注意＞
音声解析（STT（Speech To Text））が遅いです。Whisper API（音声をテキストにするOpen AIのAPI）がデフォルトで遅いのが原因なので、Whisper APIを使う限り技術でどうにかできる類の問題ではなさそうです。大体5分の音声で10分前後の処理時間をご用意ください。処理している間は適当に他の作業をしていても勝手に処理が進みます。<br>
また、短い音声で簡単に高得点が取れないよう、音声が短いとペナルティーが入るようになっています。１２００文字程度話していただくと減点はほぼなくなります。<br>

アプリのイメージ画像<br>
<img width="1433" height="694" alt="Screenshot 2025-08-17 at 20 22 34" src="https://github.com/user-attachments/assets/cd7060cd-2b89-4244-af25-916d0e20c89c" />



## MLOPsなしWebアプリの技術スタック
- Fast API / 会話ログを収取し、トークナイズ、分類する**バックエンド**
- React / WebアプリのUIコンポーネントの構築をする**フロントエンド**
- Whisper API(Open AI API)/ STT(Speech to Text)により、音声をテキストに変換
- スピーチの指標の導入1 /発話速度、文節の長さ
- スピーチの指標の導入2/ 論理構造性(構成の明瞭さ、一貫性、まとまり、情報密度、次なるアクションの喚起度(CTA)）
- AWS S3 / 各データの保存(論理スコア、解釈結果のtxtおよびjsonを保存)
- Croud Run + Netlify /バックエンドのサーバレスデプロイサービス + フロントエンドデプロイ用のサービス<br>

Croud Runについては上限メモリ16 GiB, HTTPリクエスト上限1時間となっています。<br>
S3については、一時期分析結果を表示していたものの、セキュリティーの観点からフロントエンド側から見れないようにしました。将来のMLOpsへの拡張のために集計自体はされているものの、デフォルトで暗号化が効いてますし、中身ももちろん見ませんのでご安心ください。
<フロントエンドに結果を表示していた頃の画像>
<img width="1425" height="401" alt="Screenshot 2025-08-15 at 14 36 43" src="https://github.com/user-attachments/assets/d5e13411-e3cf-4a8b-8a35-03e038e59769" />


## 反省点
- アイデアドリブンの開発は途中で行き詰まることが多い。まず扱うテーマ(今回は音声学やセールスの話) についてML以外の関連文献をよく調べ、可能かどうか十分に判断してから始めるべき。よくしらない分野を決して軽視せず、まず十分に調べるべき。
- 教師なし学習でMLOPsは普通に難しいので、ラベル付きのデータセットがない状態で開発するのはダメ🙅。今回の売り上げ予測については成約可否のラベルがないので難しい。
- 難しい指標を導入して結果的にわかりにくくなることが多い。SHAPを用いるより発話速度、発話の間隔などを可視化する方が直感的にわかりやすく、使う人にとって有用になる。
- 依存関係やモジュールがグチャグチャになりがち。都度リファクタリングした方が良い。（本心を言うとコードレビューなどあれば良いが個人開発なのでそれは難しいか？）
- 実際にWebアプリとして動かす際はスケーリングや処理能力の問題が存在する。特にWhisper APIを動かすとどうしてもバックエンドのメモリ処理能力やHTTPリクエストの処理制限時間を超え、タイムアウトしがち。ローカル環境で大体のメモリ使用量を測っておく必要がある。Renderなら512 MBしかないが、これだと最小モデルのTinyすら動かない。（Whisper APIを使いたい場合は課金するしかない？）
- 事前にどのバックエンドサービスを用いれば良いか時間を掛けて検討した方が早かった感。RenderだとStandardプラン（2 GB）でもWhisper APIはTinyしか動かない。しかもたまにCPU制限でコケるのでCloud Runに移行した。


## スコアリングの例

試行錯誤を重ね、良いプレゼンと悪いプレゼンの定量化を行いました。<br>想定ケースは「会社内のRAGの活用サービスを売り込むプレゼンテーション」です。<br>（他意はなく、CHAT GPT-5に最近何かとSNSなどでよく見るRAGの活用例を求めたところ、このような出力がなされました。）<br>どのような音声入力をしたのかに関しては、「ずんだもんITプレゼン例」の音声ファイルやテキストファイルをご覧ください。

低いスコアの例　
<img width="1406" height="234" alt="Screenshot 2025-08-13 at 14 35 46" src="https://github.com/user-attachments/assets/6a1cad10-bb43-4531-b109-63a4b4af6501" />
<img width="1436" height="569" alt="Screenshot 2025-08-13 at 14 36 42" src="https://github.com/user-attachments/assets/1ecd855c-0ca8-4c9d-81f7-be34a3fb0dbb" />
<img width="1436" height="507" alt="Screenshot 2025-08-13 at 14 37 00" src="https://github.com/user-attachments/assets/8d077fd1-ddbc-48ba-adc5-0dc883bd6d19" />

高いスコアの例　
<img width="1440" height="214" alt="Screenshot 2025-08-13 at 14 52 32" src="https://github.com/user-attachments/assets/9add4f3f-154a-4d11-9bab-0b6423bedef9" />
<img width="1440" height="656" alt="Screenshot 2025-08-13 at 14 53 19" src="https://github.com/user-attachments/assets/947a339c-2546-432c-acbd-d410e785565b" />



---


質問や疑問点などがあれば気軽にどうぞ！

